-- ============================================
-- 法律咨询助手系统 - 数据库表结构回滚
-- 日期: 2025-01-19
-- 说明: 回滚表结构修改
-- ============================================

-- ============================================
-- 警告: 执行回滚操作前请确认：
--   1. 已备份重要数据
--   2. 了解回滚的影响范围
-- ============================================

SET FOREIGN_KEY_CHECKS = 0;

-- ============================================
-- 1. 删除向量分块表
-- ============================================
DROP TABLE IF EXISTS `vector_chunk`;

-- ============================================
-- 2. 将 document_file 表重命名回 file
-- ============================================
RENAME TABLE `document_file` TO `file`;

SET FOREIGN_KEY_CHECKS = 1;

-- ============================================
-- 验证回滚结果
-- ============================================
-- 查看文件表是否存在
SHOW TABLES LIKE 'file';

-- 查看向量分块表是否已删除
SHOW TABLES LIKE 'vector_chunk';
